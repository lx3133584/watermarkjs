!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.watermark=n():t.watermark=n()}(window,function(){return r={},u.m=e=[function(t,n,e){t.exports=e(1).default},function(t,n,e){"use strict";e.r(n),e.d(n,"default",function(){return S});var r={};e.r(r),e.d(r,"atPos",function(){return l}),e.d(r,"lowerRight",function(){return d}),e.d(r,"upperRight",function(){return h}),e.d(r,"lowerLeft",function(){return s}),e.d(r,"upperLeft",function(){return p}),e.d(r,"center",function(){return g});var u={};function i(t,n,e){var r,u,i;return r=t,u=n,i=e.createImage(),"function"==typeof u&&u(i),new Promise(function(t){i.onload=function(){return t(i)},i.src=r})}function o(t,n,e){var r=e.createImage();return"function"==typeof n&&(r.onload=n),r.src=t,r}function c(t){t.getContext("2d").clearRect(0,0,t.width,t.height)}e.r(u),e.d(u,"atPos",function(){return v}),e.d(u,"lowerRight",function(){return w}),e.d(u,"lowerLeft",function(){return y}),e.d(u,"upperRight",function(){return m}),e.d(u,"upperLeft",function(){return x}),e.d(u,"center",function(){return b});var f=/^data:([^;]+);base64,(.*)$/;var a=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){return n.reduce(function(t,n){return n.call(null,t)},t)}}(function(t){return f.exec(t).slice(1)},function(t){return[(n=t[1],window.atob(n)),t[0]];var n},function(t){return new Blob([function(t){for(var n=t.length,e=new Uint8Array(n),r=0;r<n;r++)e[r]=t.charCodeAt(r);return e}(t[0])],{type:t[1]})});function l(r,u,i){return i=i||1,function(t,n){var e=t.getContext("2d");return e.save(),e.globalAlpha=i,e.drawImage(n,r(t,n),u(t,n)),e.restore(),t}}function d(t){return l(function(t,n){return t.width-(n.width+10)},function(t,n){return t.height-(n.height+10)},t)}function h(t){return l(function(t,n){return t.width-(n.width+10)},function(t,n){return 10},t)}function s(t){return l(function(t,n){return 10},function(t,n){return t.height-(n.height+10)},t)}function p(t){return l(function(t,n){return 10},function(t,n){return 10},t)}function g(t){return l(function(t,n){return(t.width-n.width)/2},function(t,n){return(t.height-n.height)/2},t)}function v(r,u,i,o,c,f){return f=f||1,function(t){var n=t.getContext("2d");n.save(),n.globalAlpha=f,n.fillStyle=c,n.font=o;var e=n.measureText(i);return n.fillText(i,r(t,e,n),u(t,e,n)),n.restore(),t}}function w(t,n,e,r,u){return v(function(t,n){return t.width-(n.width+10)},function(t){return u||t.height-10},t,n,e,r)}function y(t,n,e,r,u){return v(function(){return 10},function(t){return u||t.height-10},t,n,e,r)}function m(t,n,e,r,u){return v(function(t,n){return t.width-(n.width+10)},function(){return u||20},t,n,e,r)}function x(t,n,e,r,u){return v(function(){return 10},function(){return u||20},t,n,e,r)}function b(t,n,e,r,u){return v(function(t,n,e){return e.textAlign="center",t.width/2},function(t,n,e){return e.textBaseline="middle",t.height/2},t,n,e,r)}var P=u;function j(n,e){return Object.keys(e).forEach(function(t){return n[t]=e[t]}),n}var O={init:function(){},type:"png",quality:.92,select:"#watermark"};function A(t){return j(j({},O),t)}function S(t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=A(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return r||(n=e.select,r=new Promise(function(e,r){wx.createSelectorQuery().select(n).fields({node:!0,size:!0}).exec(function(t){var n=t[0].node;n?(c(n),e(n)):r("can not find canvas")})}).then(function(t){return t}).then(function(){return i(t,e.init,null)})),{dataUrl:function(n){var t=this.then(function(t){return n=t,r=(e=null).getContext("2d"),e.width=n.width,e.height=n.height,r.drawImage(n,0,0),e;var n,e,r}).then(function(){return t=null,n.apply(null,t),t;var t}).then(function(){return function(e,t){return 1<arguments.length&&void 0!==t||type,new Promise(function(n,t){wx.canvasToTempFilePath({fileType:type,quality:quality,x:0,y:0,width:e.width,height:e.height,destWidth:e.width,destHeight:e.height,canvasId:e.canvasId,success:function(t){n(t.tempFilePath)},fail:t})})}(null,{type:e.type,quality:e.quality})});return S(resources,e,t)},blob:function(t){var n=this.dataUrl(t).then(a);return S(resources,e,n)},image:function(t){var n=this.dataUrl(t).then(o);return S(resources,e,n)},text:function(t){var n=this.dataUrl(t);return S(resources,e,n)},then:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return r.then.apply(r,n)}}}S.image=r,S.text=P,S.destroy=function(){return c()}}],u.c=r,u.d=function(t,n,e){u.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(n,t){if(1&t&&(n=u(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(u.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)u.d(e,r,function(t){return n[t]}.bind(null,r));return e},u.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(n,"a",n),n},u.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},u.p="",u(u.s=0);function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}var e,r});